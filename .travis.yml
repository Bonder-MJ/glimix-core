language: python
sudo: required
dist: trusty
git:
  depth: 5
matrix:
  include:
  - python: 2.7
    compiler: clang-3.8
    env: NUMBA="true" LLVM_VERSION="3.8" CXX="clang++-3.8" LLVM_CONFIG="llvm-config-3.8"
      "PATH=~/bin:$PATH"
  - python: 3.5
    compiler: clang-3.8
    env: NUMBA="true" LLVM_VERSION="3.8" CXX="clang++-3.8" LLVM_CONFIG="llvm-config-3.8"
      "PATH=~/bin:$PATH"
  - python: 3.6
    compiler: clang-3.8
    env: NUMBA="true" LLVM_VERSION="3.8" CXX="clang++-3.8" LLVM_CONFIG="llvm-config-3.8"
      "PATH=~/bin:$PATH"
before_install:
- travis_retry travis/install_clang38.sh;
- travis_retry travis/install_llvmlite.sh;
- travis_retry travis/install_pandoc.sh
- travis_retry travis/install_liknorm.sh
script:
- python setup.py sdist
- pip install dist/`ls dist | grep -i -E '\.(gz)$' | head -1`[numba] -vvv;
- pushd /
- python -c "import sys; import limix_inference; sys.exit(limix_inference.test())"
- popd
notifications:
  email: false
deploy:
  provider: pypi
  user: dhorta
  password:
    secure: UR/RnKHYM1vzmZoD2AMORkVcynqlnwpHzQpjMVu+a43V0NAoBsC1zonfE28e08wFCfBKbM8KhFTMk3CD5YVZtGoOV7yjc5Qnjq+icBbCSDD+lQaZMmIa2zmNUIBN+9DjrPEbNRnQnRLIfo6OdiVBg5cM0SWWV25FBqGgMBQ/9IaLXo2ugnfVPOPt49HdTU+TYu0ElGRdIg3puKR6ynKh5sUcicvTP9GBBLrja9KZsy7jpeKRsq4gArnR1dh//KA3sEbqqhWl9o+rqJUW38ONRwEpNNvPr52xqaYMs6QB2fLhSDZtR60zmillS2QPyUbgSv5AM6ss5Kgw2Ql668kHjUTtK0kvGoDAc934XmWrjG+iq8Bz334my/mHDc/AO0HFl9pmEHQ2vblep+rEgEEh9VoHnHzSlhUZ1y2YHDNenS1vEiLtpZfq1ohBX8aW11E1Az5Svn2czG4ZOI18F42cT7mtCqYuFOO7LMdOO+kPtiOzmviX2Fp3ic9uB4M7ke4VXoe5FG1FUheoN5wm5mNzNMzJN/+S5ypwDm55D4dvet0xAv9Jy8QTvO+xSIcE33wxzqHcpY0ETgyNdxX5w8gVm3haAuJC7Eljx7yPVobq3fdSx2TysSdfG6hUkHyaguGmLQdc9p00J+1m0901uhJV0Vaorq4A9vPXvyEnlGuCCqg=
  on:
    repo: limix/limix-inference
    branch: 1.1.x
